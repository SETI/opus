<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<style>
@media (min-width: 768px){
  #left {
    position: absolute;
    top: 0px;
    bottom: 0;
    left: 0;
    width: 25%;
    overflow-y: scroll;
    border-right: 1px solid blue;
  }
  #right {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    overflow-y: scroll;
    width: 75%;
  }
}
#left {
  text-align: left;
  height:100%;
}

#right {
  height:100%;
  text-align: left;
}
.SessionInfo {
  display: none;
}
td.SessionInfo {
  vertical-align:top;
}
</style>
</head>
<body>

<div class="container-fluid">
<div class="row">
<div class="col-sm-3" id="left">
{% spaceless %}
{% for host_info in host_infos %}
    <span>{{ host_info.hostname }} ({{ host_info.total_time }})<span class="badge badge-secondary">{{ host_info.sessions | length }}</span></span>
    <ul>
        {% for session in host_info.sessions %}
            <li><a href="#" class=SessionLink data-id="{{ session.id }}">{{ session.entries.0.log_entry.time | date:'Y/M/d H:i:s' }} ({{ session.time_delta }})</a></li>
        {% endfor %}
    </ul>
{% endfor %}
{% endspaceless %}
</div>
<div class="col-sm-9" id="right">
{% spaceless %}
{% for host_info in host_infos %}
    {% for session in host_info.sessions %}
        <div id="{{ session.id }}" class="SessionInfo">
        <b>{{ host_info.hostname }} at {{ session.entries.0.log_entry.time | date:'Y/M/d H:i:s O' }}</b>
        <table>
        {% for entry in session.entries %}
            {% for line in entry.data %}
                <tr>
                {% if forloop.first %}
                    <td><a href="{{api_host_url}}{{entry.log_entry.url.geturl | safe}}" target="_blank">{{entry.start_time_offset}}</a></td>
                {% else %}
                    <td>&nbsp;</td>
                {% endif %}
                <td>{{ line }}</td>
                </tr>
            {% endfor %}
        {% endfor %}
        </table>
        <hr>
        <b>Search slugs</b>: {% for x in session.search_slugs %} {{ x.name }}{% if x.is_obsolete %} (obsolete){% endif %}{%if not forloop.last %},{%endif %} {% endfor %}
        <br><br>
        <b>Column slugs</b>: {% for x in session.column_slugs %} {{ x.name }}{% if x.is_obsolete %} (obsolete){% endif %}{%if not forloop.last %},{%endif %} {% endfor %}
        </div>
    {% endfor %}
{% endfor %}
{% endspaceless %}
</div>
</div>
</div>

<script>

$(document).ready(function(){
    $('.SessionInfo').first().show()

    $('.SessionLink').click(function() {
        var target_id = '#' + $(this).attr('data-id');
        $('.SessionInfo').hide();
        $(target_id).show()
    })
});
</script>
</body>
</html>
